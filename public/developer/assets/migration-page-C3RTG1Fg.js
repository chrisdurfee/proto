import{V as g,i as h,e as u,H as y,D as s,F as b,p as w,f as a,l as M,Y as t,r as v,h as c,o as i,M as o,j as m}from"./index-DD5ZlTX4.js";import{S as k}from"./sidebar-menu-page-D_2zNFuZ-DJNCgvAz.js";const f=g.extend({url:"/api/developer/migration",xhr:{update(e,l){let n="direction="+e.direction;return this._post("",n,e,l)}}}),A=()=>y([u({class:"text-muted-foreground border-b"},[w({class:"hidden md:table-cell"}),a({key:"id",label:"ID",class:"hidden md:table-cell"}),a({key:"migration",label:"Migration",class:"max-w-[150px] md:max-w-none"}),a({key:"createdAt",label:"Created At",class:"hidden md:table-cell"}),a({key:"groupId",label:"Group ID",align:"justify-end"})])]),I=(e,l)=>u({class:"items-center px-4 py-2 hover:bg-muted/50"},[s({class:"p-4 hidden md:table-cell"},[new b({checked:e.selected,class:"mr-2",onChange:()=>l(e)})]),s({class:"p-4 hidden md:table-cell"},String(e.id)),s({class:"p-4 truncate max-w-[150px] md:max-w-none"},e.migration),s({class:"p-4 hidden md:table-cell"},e.createdAt),s({class:"p-4 text-right justify-end"},String(e.groupId))]),R=()=>h({data:new f,cache:"list",customHeader:A(),rows:[],limit:50,rowItem:I,key:"id"}),r=(e,l)=>{new m({icon:i.circleMinus,type:"destructive",title:"Are you absolutely sure?",description:"Are you sure you want to revert the last migration?",confirmTextLabel:"Confirm",confirmed:()=>p("down",l)}).open()},d=(e,l)=>{new m({icon:i.circlePlus,title:"Are you absolutely sure?",description:"Are you sure you want to run the migration?",confirmTextLabel:"Confirm",confirmed:()=>p("up",l)}).open()},p=(e,{list:l})=>{new f().xhr.update({direction:e},x=>{x&&l.refresh()})},H=()=>M({class:"flex flex-auto flex-col"},[t({class:"flex flex-auto items-center justify-between w-full"},[v({class:"text-3xl font-bold"},"Migrations"),t({class:"flex items-center gap-2"},[t({class:"hidden lg:flex"},[c({variant:"withIcon",class:"text-muted-foreground outline",icon:i.circleMinus,click:r},"Revert")]),t({class:"flex lg:hidden mr-0"},[o({content:"Revert Migration",position:"left"},c({variant:"icon",class:"outline",icon:i.circleMinus,click:r}))]),t({class:"hidden lg:flex"},[c({variant:"withIcon",class:"text-muted-foreground",icon:i.circlePlus,click:d},"Run")]),t({class:"flex lg:hidden mr-0"},[o({content:"Run Migration",position:"left"},c({variant:"icon",class:"outline",icon:i.circlePlus,click:d}))])])])]),P={update(){this.list&&this.list.refresh()}},D=()=>new k(P,[t({class:"grid grid-cols-1"},[t({class:"flex flex-auto flex-col p-6 pt-0 space-y-6 md:space-y-12 md:pt-6 lg:p-8 w-full mx-auto lg:max-w-7xl"},[H(),t({class:"flex flex-auto flex-col space-y-2 md:space-y-4"},[t({class:"flex flex-col overflow-x-auto"},[R()])])])])]);export{D as MigrationPage,D as default};
