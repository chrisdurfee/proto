import{w as x,o as l,Y as i,I as g,g as a,d as c,q as b,l as y,r as w,h as d,M as P,i as k,e as u,H as A,D as n,F as v,p as C,f as o}from"./index-DM3KSgk2.js";import{S as M}from"./sidebar-menu-page-D_2zNFuZ-DKHVgHxo.js";import{P as f}from"./permission-model-D50hiXxS.js";const S=()=>[g({legend:"Permission Settings"},[new a({name:"name",label:"Permission Name",description:"Enter the name of the permission."},[c({type:"text",placeholder:"e.g. View Users",required:!0,bind:"name"})]),new a({name:"slug",label:"Slug",description:"URL-friendly version of the permission name."},[c({type:"text",placeholder:"e.g. users.view",required:!0,bind:"slug"})]),new a({name:"description",label:"Description",description:"A brief description of the permission."},[b({placeholder:"A short description...",rows:3,bind:"description"})]),new a({name:"module",label:"Module",description:"The module that registered the permission."},[c({type:"text",placeholder:"module",required:!0,bind:"module"})])])],q=(e,s)=>{e.xhr.add("",t=>{if(!t||t.success===!1){app.notify({type:"destructive",title:"Error",description:"An error occurred while adding the permission.",icon:l.shield});return}app.notify({type:"success",title:"Permission Added",description:"The permission has been added.",icon:l.check}),s()})},D=(e,s)=>{e.xhr.update("",t=>{if(!t||t.success===!1){app.notify({type:"destructive",title:"Error",description:"An error occurred while updating the permission.",icon:l.shield});return}app.notify({type:"success",title:"Permission Updated",description:"The permission has been updated.",icon:l.check}),s()})},h=(e={})=>{const s=e.item||{},t=s.id?"edit":"add";return new x({data:new f(s),title:t==="edit"?"Edit Permission":"Add Permission",icon:t==="edit"?l.pencil.square:l.document.add,description:t==="edit"?`Editing the '${s.name}' Permission`:"Let's add a new Permission.",size:"md",type:"right",onSubmit:({data:r})=>{const m=()=>e.onClose&&e.onClose(r);t==="edit"?D(r,m):q(r,m)}},[i({class:"flex flex-col lg:p-4 space-y-8"},[i({class:"flex flex-auto flex-col w-full gap-4"},S())])]).open()},E=(e,{list:s})=>{s.refresh()},p=(e,s)=>h({item:e,onClose:t=>s.list.refresh()}),H=()=>y({class:"flex flex-auto flex-col"},[i({class:"flex flex-auto items-center justify-between w-full"},[w({class:"text-3xl font-bold"},"Permissions"),i({class:"flex items-center gap-2"},[i({class:"hidden lg:flex"},[d({variant:"withIcon",class:"text-muted-foreground outline",icon:l.refresh,click:E},"Refresh")]),i({class:"hidden lg:flex"},[d({variant:"withIcon",class:"text-muted-foreground primary",icon:l.circlePlus,click:(e,s)=>p(null,s)},"Add Permission")]),i({class:"flex lg:hidden mr-0"},[P({content:"Add Permission",position:"left"},d({variant:"icon",class:"outline",icon:l.circlePlus,click:(e,s)=>p(null,s)}))])])])]),I=(e,{parent:s})=>h({item:e,onClose:t=>s.list.mingle([t.get()])}),T=(e,s)=>u({class:"items-center px-4 py-2 hover:bg-muted/50 cursor-pointer",click:(t,r)=>I(e,r)},[n({class:"p-4 hidden md:table-cell"},[new v({checked:e.selected,class:"mr-2",onChange:()=>s(e)})]),n({class:"p-4"},String(e.id)),n({class:"p-4 truncate max-w-[150px]"},e.name),n({class:"p-4 truncate max-w-[150px]"},e.slug),n({class:"p-4 truncate max-w-[200px]"},e.description),n({class:"p-4 truncate max-w-[200px]"},e.module),n({class:"p-4 hidden md:table-cell"},e.createdAt)]),R=()=>A([u({class:"text-muted-foreground border-b"},[C({class:"hidden md:table-cell"}),o({key:"id",label:"ID"}),o({key:"name",label:"Name"}),o({key:"slug",label:"Slug"}),o({key:"description",label:"Description"}),o({key:"module",label:"Module"}),o({key:"createdAt",label:"Created At",class:"hidden md:table-cell"})])]),U=e=>k({data:e,cache:"list",customHeader:R(),rows:[],limit:50,rowItem:T,key:"id"}),$=()=>{const e=new f({filter:{}}),s={data:e,class:"pt-0",update(){this.list&&this.list.refresh()}};return new M(s,[i({class:"grid grid-cols-1"},[i({class:"flex flex-auto flex-col p-6 pt-0 space-y-6 md:space-y-12 md:pt-6 lg:p-8 w-full mx-auto"},[H(),i({class:"flex flex-auto flex-col space-y-2 md:space-y-4"},[i({class:"flex flex-col overflow-x-auto"},[U(e)])])])])])};export{$ as PermissionPage,$ as default};
