import{L as h,Y as c,b as x,c as f,G as y,V as b,w,o as r,I as i,g as e,d as t,R as N,q as u,T,F as C,l as M,r as q}from"./index-DD5ZlTX4.js";import{S as E}from"./sidebar-menu-page-D_2zNFuZ-DJNCgvAz.js";const d=({title:l,click:a,icon:n,description:o})=>h({class:"flex flex-auto flex-col p-4 min-w-[100px] md:min-w-[280px] hover:bg-muted/50 transition-colors cursor-pointer",margin:"m-0",click:a},[c({class:"flex flex-col justify-center items-center my-4"},[x({size:"md"},n),f({class:"text-lg mt-4"},l),o&&y({class:"text-sm text-muted-foreground mt-1 text-center"},o)])]),S=b.extend({url:"/api/developer/generator",xhr:{objectType:"resource",add(l,a){let n="type="+this.model.get("type")+"&"+this.setupObjectData();return this._post("",n,l,a)}}}),v=b.extend({url:"/api/developer/table",xhr:{objectType:"resource",getColumns(l,a){const o="columns?"+("connection="+this.model.get("connection")+"&tableName="+this.model.get("tableName"));return this._get(o,"",l,a)}}}),k=l=>l?l.replace(" ","-").toLowerCase():"",s=({resourceType:l="Full Resource"})=>new w({data:new S({type:k(l)}),title:`Add ${l}`,icon:r.document.add,description:`Let's add a new ${l}.`,size:"md",type:"right",onSubmit:({data:a})=>{const n=(a.get("model.fields")||"").replace(/\n/g,"").trim();a.set("model.fields",n),a.xhr.add("",o=>{if(!o||o.success===!1){app.notify({type:"destructive",title:"Error",description:"An error occurred while adding the resource.",icon:r.shield});return}app.notify({type:"success",title:`${l} Added`,description:`The ${l} has been added.`,icon:r.check})})}},[c({class:"flex flex-col lg:p-4 space-y-8"},[c({class:"flex flex-auto flex-col w-full gap-4"},m(l))])]).open(),A=l=>{let a="";for(var n=0,o=l.length;n<o;n++)a+=l[n],n!==o-1&&(a+=`:
`);return a};function m(l,a=!1){switch(l){case"API":return[i({legend:"API Settings"},[a===!1&&new e({name:"module",label:"Module Name",description:"The module name to add the resource."},[t({type:"text",placeholder:"e.g. Example",required:!0,bind:"api.moduleName",value:"Common"})]),a===!1&&new e({name:"className",label:"Class Name",description:"The class name for the API."},[t({type:"text",placeholder:"e.g. Example",required:!0,bind:"api.className"})]),new e({name:"namespace",label:"Namespace",description:"Optional namespace for the API."},[t({type:"text",placeholder:"e.g. ExampleSub",bind:"api.namespace"})])])];case"Controller":return[i({legend:"Controller Settings"},[a===!1&&new e({name:"module",label:"Module Name",description:"The module name to add the resource."},[t({type:"text",placeholder:"e.g. Example",required:!0,bind:"controller.moduleName",value:"Common"})]),a===!1&&new e({name:"className",label:"Class Name",description:"The class name for the controller."},[t({type:"text",placeholder:"e.g. Example",required:!0,bind:"controller.className"})]),new e({name:"namespace",label:"Namespace",description:"Optional namespace for the controller."},[t({type:"text",placeholder:"e.g. ExampleSub",bind:"controller.namespace"})]),new e({name:"extends",label:"Extends",description:"Which class this controller extends."},[t({type:"text",value:"Controller",required:!0,bind:"controller.extends"})])])];case"Module":return[i({legend:"Module Settings"},[a===!1&&new e({name:"moduleName",label:"Module Name",description:"The name for the module."},[t({type:"text",placeholder:"e.g. Example",required:!0,bind:"module.name"})])])];case"Gateway":return[i({legend:"Gateway Settings"},[a===!1&&new e({name:"moduleName",label:"Module Name",description:"The name for the module."},[t({type:"text",placeholder:"e.g. Example",required:!0,bind:"gateway.moduleName"})])])];case"Model":return[T(({data:n})=>{const o=new v;n.link(o,"connection","storage.connection"),n.link(o,"tableName","model.tableName");const g=()=>{o.xhr.getColumns("",p=>{if(!p||p.length<1)return!1;n.set("model.fields",A(p))})};return i({legend:"Model Settings"},[a===!1&&new e({name:"module",label:"Module Name",description:"The module name to add the resource."},[t({type:"text",placeholder:"e.g. Example",required:!0,bind:"model.moduleName",value:"Common"})]),new e({name:"namespace",label:"Namespace",description:"Optional namespace."},[t({type:"text",placeholder:"e.g. ExampleSub",bind:"namespace"})]),new e({name:"connection",label:"Connection",description:"Database connection name."},[t({type:"text",placeholder:"e.g. default",bind:"storage.connection",value:"default"})]),new e({name:"className",label:"Class Name",description:"The class name for the model."},[t({type:"text",placeholder:"e.g. ModelName",required:!0,bind:"model.className"})]),new e({name:"tableName",label:"Table Name",description:"The database table name."},[t({type:"text",placeholder:"e.g. table_name",required:!0,bind:"model.tableName",blur:()=>g()})]),new e({name:"alias",label:"Alias",description:"An alias used in queries."},[t({type:"text",placeholder:"e.g. a",bind:"model.alias",required:!0})]),new e({name:"fields",label:"Fields",description:"Define fields for the model."},[u({placeholder:`e.g.
id:
createdAt:
updatedAt:`,rows:4,required:!0,bind:"model.fields"})]),new e({name:"joins",label:"Joins",description:"Define joins for the model."},[u({placeholder:`e.g.
$builder->left('test_table', 't')->on('id', 'client_id');`,rows:4,bind:"model.joins"})]),new e({name:"extends",label:"Extends",description:"Which class this model extends."},[t({type:"text",value:"Model",required:!0,bind:"model.extends"})]),a===!0&&new e({name:"storage",label:"Storage",description:"Whether to attach a storage layer."},[new C({checked:!1,bind:"model.storage"})])])})];case"Storage":return[i({legend:"Storage Settings"},[a===!1&&new e({name:"module",label:"Module Name",description:"The module name to add the resource."},[t({type:"text",placeholder:"e.g. Example",required:!0,bind:"storage.moduleName",value:"Common"})]),a===!1&&new e({name:"className",label:"Class Name",description:"The class name for storage."},[t({type:"text",placeholder:"e.g. Example",required:!0,bind:"storage.className"})]),new e({name:"namespace",label:"Namespace",description:"Optional namespace for storage."},[t({type:"text",placeholder:"e.g. ExampleSub",bind:"storage.namespace"})]),new e({name:"extends",label:"Extends",description:"Which class this storage extends."},[t({type:"text",value:"Storage",required:!0,bind:"storage.extends"})]),new e({name:"connection",label:"Connection",description:"The database/storage connection name."},[t({type:"text",placeholder:"e.g. default",bind:"storage.connection"})])])];case"Policy":return[i({legend:"Policy Settings"},[a===!1&&new e({name:"module",label:"Module Name",description:"The module name to add the resource."},[t({type:"text",placeholder:"e.g. Example",required:!0,bind:"policy.moduleName",value:"Common"})]),new e({name:"className",label:"Class Name",description:"The class name for the policy."},[t({type:"text",placeholder:"e.g. Example",required:!0,bind:"policy.className"})]),new e({name:"namespace",label:"Namespace",description:"Optional namespace for the policy."},[t({type:"text",placeholder:"e.g. ExampleSub",bind:"policy.namespace"})]),new e({name:"extends",label:"Extends",description:"Which class this policy extends."},[t({type:"text",value:"Policy",required:!0,bind:"policy.extends"})])])];case"Table":return[i({legend:"Table Settings"},[new e({name:"connection",label:"Connection",description:"The database connection name."},[t({type:"text",placeholder:"e.g. default",bind:"table.connection",value:"default"})]),new e({name:"tableName",label:"Table Name",description:"The table name."},[t({type:"text",placeholder:"e.g. table_name",required:!0,bind:"table.tableName"})]),new e({name:"callback",label:"Call Back",description:"The table creation or modification logic."},[u({placeholder:`e.g. // fields
$table->id();
$table->createdAt();
$table->updatedAt();
$table->int('message_id', 20);
$table->varchar('subject', 160);
$table->text('message')->nullable();
$table->datetime('read_at');
$table->datetime('forwarded_at');

// indices
$table->index('email_read')->fields('id', 'read_at');
$table->index('created')->fields('created_at');

// foreign keys
$table->foreign('message_id')->references('id')->on('messages');`,required:!0,rows:6,bind:"table.callBack"})])])];case"Migration":return[i({legend:"Migration Settings"},[a===!1&&new e({name:"module",label:"Module Name",description:"The module name to add the resource."},[t({type:"text",placeholder:"e.g. Example",required:!0,bind:"migration.moduleName",value:"Common"})]),new e({name:"className",label:"Class Name",description:"The migration class name."},[t({type:"text",placeholder:"e.g. Example",required:!0,bind:"migration.className"})])])];case"Unit Test":return[i({legend:"Unit Test Settings"},[a===!1&&new e({name:"module",label:"Module Name",description:"The module name to add the resource."},[t({type:"text",placeholder:"e.g. Example",required:!0,bind:"test.moduleName",value:"Common"})]),new e({name:"className",label:"Class Name",description:"The class name for the test."},[t({type:"text",placeholder:"e.g. Example",required:!0,bind:"test.className"})]),new e({name:"namespace",label:"Namespace",description:"Optional namespace for the test."},[t({type:"text",placeholder:"e.g. ExampleSub",bind:"test.namespace"})]),new e({name:"type",label:"Type",description:"The type of test."},[N({options:[{label:"Unit",value:"Unit"},{label:"Feature",value:"Feature"}],value:"Unit",bind:"test.type"})])])];case"Full Resource":return[i({legend:"Module Settings"},[new e({name:"module",label:"Module Name",description:"The module name to add the resource."},[t({type:"text",placeholder:"e.g. Example",required:!0,bind:"moduleName",value:"Common"})])]),...m("Model",!0),...m("API",!0),...m("Controller",!0),...m("Storage",!0)];default:return[c("No form fields are available for this resource type.")]}}const $=()=>c({class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},[d({title:"Full Resource",click:()=>s({resourceType:"Full Resource"}),description:"Create a full resource with all the necessary files.",icon:r.document.duplicate}),d({title:"Module",click:()=>s({resourceType:"Module"}),description:"Create a new module directory.",icon:r.document.duplicate}),d({title:"Gateway",click:()=>s({resourceType:"Gateway"}),description:"Create a module gateway.",icon:r.document.duplicate}),d({title:"API",click:()=>s({resourceType:"API"}),description:"Create an API.",icon:r.document.duplicate}),d({title:"Controller",click:()=>s({resourceType:"Controller"}),description:"Create a controller.",icon:r.document.duplicate}),d({title:"Model",click:()=>s({resourceType:"Model"}),description:"Create a model.",icon:r.document.duplicate}),d({title:"Storage",click:()=>s({resourceType:"Storage"}),description:"Create a storage.",icon:r.document.duplicate}),d({title:"Policy",click:()=>s({resourceType:"Policy"}),description:"Create a policy.",icon:r.document.duplicate}),d({title:"Table",click:()=>s({resourceType:"Table"}),description:"Create a database table.",icon:r.document.duplicate}),d({title:"Migration",click:()=>s({resourceType:"Migration"}),description:"Create a new migration.",icon:r.document.duplicate}),d({title:"Unit Test",click:()=>s({resourceType:"Unit Test"}),description:"Create a test.",icon:r.document.duplicate})]),P=()=>M({class:"flex flex-auto flex-col"},[c({class:"flex flex-auto items-center justify-between w-full"},[q({class:"text-3xl font-bold"},"Generator")])]),G=()=>new E([c({class:"grid grid-cols-1"},[c({class:"flex flex-auto flex-col p-6 pt-0 space-y-6 lg:space-y-12 md:pt-6 lg:p-8 w-full mx-auto lg:max-w-7xl"},[P(),c({class:"flex flex-auto flex-col space-y-4"},[$()])])])]);export{G as GeneratorPage,G as default};
