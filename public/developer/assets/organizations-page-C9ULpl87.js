import{V as m,w as g,o as a,Y as i,I as h,g as x,d as y,l as b,r as w,h as o,M as z,i as O,e as p,H as k,D as l,F as A,p as C,f as c}from"./index-DD5ZlTX4.js";import{S as v}from"./sidebar-menu-page-D_2zNFuZ-DJNCgvAz.js";const f=m.extend({url:"/api/user/organization",xhr:{}}),P=()=>[h({legend:"Organization Settings"},[new x({name:"name",label:"Organization Name",description:"Enter the name of the organization."},[y({type:"text",placeholder:"e.g. Acme Corp",required:!0,bind:"name"})])])],E=(e,t)=>{e.xhr.add("",s=>{if(!s||s.success===!1){app.notify({type:"destructive",title:"Error",description:"An error occurred while adding the permission.",icon:a.shield});return}app.notify({type:"success",title:"Permission Added",description:"The permission has been added.",icon:a.check}),t()})},H=(e,t)=>{e.xhr.update("",s=>{if(!s||s.success===!1){app.notify({type:"destructive",title:"Error",description:"An error occurred while updating the permission.",icon:a.shield});return}app.notify({type:"success",title:"Permission Updated",description:"The permission has been updated.",icon:a.check}),t()})},u=(e={})=>{const t=e.item||{},s=t.id?"edit":"add";return new g({data:new f(t),title:s==="edit"?"Edit Organization":"Add Organization",icon:s==="edit"?a.pencil.square:a.document.add,description:s==="edit"?`Editing the '${t.name}' Organization`:"Let's add a new Organization.",size:"md",type:"right",onSubmit:({data:n})=>{const r=()=>e.onClose&&e.onClose(n);s==="edit"?H(n,r):E(n,r)}},[i({class:"flex flex-col lg:p-4 space-y-8"},[i({class:"flex flex-auto flex-col w-full gap-4"},P())])]).open()},I=(e,{list:t})=>{t.refresh()},d=(e,t)=>u({item:e,onClose:s=>t.list.refresh()}),M=()=>b({class:"flex flex-auto flex-col"},[i({class:"flex flex-auto items-center justify-between w-full"},[w({class:"text-3xl font-bold"},"Organizations"),i({class:"flex items-center gap-2"},[i({class:"hidden lg:flex"},[o({variant:"withIcon",class:"text-muted-foreground outline",icon:a.refresh,click:I},"Refresh")]),i({class:"hidden lg:flex"},[o({variant:"withIcon",class:"text-muted-foreground primary",icon:a.circlePlus,click:(e,t)=>d(null,t)},"Add Organization")]),i({class:"flex lg:hidden mr-0"},[z({content:"Add Organization",position:"left"},o({variant:"icon",class:"outline",icon:a.circlePlus,click:(e,t)=>d(null,t)}))])])])]),S=(e,{parent:t})=>u({item:e,onClose:s=>t.list.mingle([s.get()])}),T=(e,t)=>p({class:"items-center px-4 py-2 hover:bg-muted/50 cursor-pointer",click:(s,n)=>S(e,n)},[l({class:"p-4 hidden md:table-cell"},[new A({checked:e.selected,class:"mr-2",onChange:()=>t(e)})]),l({class:"p-4"},String(e.id)),l({class:"p-4 truncate max-w-[150px]"},e.name),l({class:"p-4 hidden md:table-cell"},e.createdAt)]),D=()=>k([p({class:"text-muted-foreground border-b"},[C({class:"hidden md:table-cell"}),c({key:"id",label:"ID"}),c({key:"name",label:"Name"}),c({key:"createdAt",label:"Created At",class:"hidden md:table-cell"})])]),R=e=>O({data:e,cache:"list",customHeader:D(),rows:[],limit:50,rowItem:T,key:"id"}),N=()=>{const e=new f({filter:{}}),t={data:e,class:"pt-0",update(){this.list&&this.list.refresh()}};return new v(t,[i({class:"grid grid-cols-1"},[i({class:"flex flex-auto flex-col p-6 pt-0 space-y-6 md:space-y-12 md:pt-6 lg:p-8 w-full mx-auto"},[M(),i({class:"flex flex-auto flex-col space-y-2 md:space-y-4"},[i({class:"flex flex-col overflow-x-auto"},[R(e)])])])])])};export{N as OrganizationsPage,N as default};
